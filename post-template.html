<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>POST_TITLE | Richard Lodder, MBA, MSc</title>
  <meta name="description" content="POST_DESCRIPTION" />
  <link rel="stylesheet" href="../../../styles.css" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>◆</text></svg>">
</head>
<body>
  <a class="skip" href="#content">Skip to content</a>

  <header class="site-header">
    <div class="container">
      <div class="brand">
        <a href="../../../index.html" class="brand__link">Richard Lodder, MBA, MSc</a>
        <span class="brand__tag">Data Science/Tech Journey</span>
      </div>
      <nav class="nav" aria-label="Main">
        <a href="../../../index.html" class="nav__link">Home</a>
        <a href="../../../posts.html" class="nav__link is-active">Posts</a>
        <a href="../../../about.html" class="nav__link">About</a>
      </nav>
    </div>
  </header>

  <!-- Reading Progress Bar -->
  <div class="reading-progress">
    <div class="reading-progress__bar" id="progressBar"></div>
  </div>

  <main id="content" class="container">
    <div class="article-layout">
      <article class="article">
        <header class="article__header">
          <h1>POST_TITLE</h1>
          <p class="article__meta">POST_DATE · POST_READ_TIME min read · POST_CATEGORY</p>
        </header>

        <p class="article__lead">
          POST_LEAD_PARAGRAPH
        </p>

        <div class="article__content">
          <!-- Your post content goes here -->

          <h2>Section heading</h2>
          <p>
            Your content here...
          </p>

          <a href="../../../posts.html" class="back-link">Back to Posts</a>
        </div>
      </article>

      <!-- Sidebar -->
      <aside class="sidebar">
        <div class="sidebar__inner">
          <!-- Table of Contents -->
          <div class="sidebar__section">
            <h2 class="sidebar__title">Contents</h2>
            <nav class="toc" id="tableOfContents">
              <!-- Generated by JavaScript -->
            </nav>
          </div>

          <!-- Post Meta -->
          <div class="sidebar__section">
            <h2 class="sidebar__title">Post Details</h2>
            <div class="post-meta">
              <div class="post-meta__item">Published POST_DATE</div>
              <div class="post-meta__item">POST_READ_TIME min read</div>
              <div class="post-meta__item">POST_CATEGORY</div>
            </div>
          </div>
        </div>
      </aside>
    </div>

    <footer class="footer">
      <p>© <span id="year"></span> Richard Lodder, MBA, MSc · Built with GitHub Pages</p>
    </footer>
  </main>

  <script>
    // Update year
    document.getElementById("year").textContent = new Date().getFullYear();

    // Generate Table of Contents
    function generateTOC() {
      const content = document.querySelector('.article__content');
      const headings = content.querySelectorAll('h2');
      const toc = document.getElementById('tableOfContents');

      if (headings.length === 0) {
        toc.parentElement.style.display = 'none';
        return;
      }

      headings.forEach((heading, index) => {
        // Add ID to heading if it doesn't have one
        if (!heading.id) {
          heading.id = `section-${index}`;
        }

        // Create TOC item
        const li = document.createElement('li');
        li.className = 'toc__item';

        const a = document.createElement('a');
        a.className = 'toc__link';
        a.href = `#${heading.id}`;
        a.textContent = heading.textContent;

        li.appendChild(a);
        toc.appendChild(li);
      });

      // Highlight active section on scroll
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          const id = entry.target.getAttribute('id');
          const tocLink = document.querySelector(`.toc__link[href="#${id}"]`);

          if (entry.isIntersecting) {
            document.querySelectorAll('.toc__link').forEach(link => {
              link.classList.remove('is-active');
            });
            if (tocLink) {
              tocLink.classList.add('is-active');
            }
          }
        });
      }, { rootMargin: '-100px 0px -66%' });

      headings.forEach(heading => observer.observe(heading));
    }

    // Reading Progress Bar
    function updateReadingProgress() {
      const progressBar = document.getElementById('progressBar');
      const article = document.querySelector('.article__content');

      if (!article || !progressBar) return;

      const articleTop = article.offsetTop;
      const articleHeight = article.offsetHeight;
      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
      const windowHeight = window.innerHeight;

      const scrollProgress = (scrollTop - articleTop + windowHeight / 2) / articleHeight;
      const percentage = Math.min(Math.max(scrollProgress * 100, 0), 100);

      progressBar.style.width = percentage + '%';
    }

    // Initialize
    generateTOC();
    updateReadingProgress();

    // Update progress on scroll
    window.addEventListener('scroll', updateReadingProgress);
  </script>
</body>
</html>
